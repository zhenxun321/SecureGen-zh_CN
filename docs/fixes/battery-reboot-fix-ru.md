# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –ø–∏—Ç–∞–Ω–∏–∏ –æ—Ç –±–∞—Ç–∞—Ä–µ–∏ (PIN –∫–æ–¥)

## –ü—Ä–æ–±–ª–µ–º–∞
–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–≤–æ–¥–µ PIN –∫–æ–¥–∞ –∫–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç –±–∞—Ç–∞—Ä–µ–∏ —á–µ—Ä–µ–∑ JST, –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ –æ—Ç USB.

### –í–∞–∂–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ! üîç
**–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ:** –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ **—É–¥–µ—Ä–∂–∞–Ω–∏–∏ –∫–Ω–æ–ø–∫–∏**, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –ø—Ä–∏ **–±—ã—Å—Ç—Ä—ã—Ö –Ω–∞–∂–∞—Ç–∏—è—Ö**.

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏ —É–¥–µ—Ä–∂–∞–Ω–∏–∏ –∫–Ω–æ–ø–∫–∏ —ç–∫—Ä–∞–Ω –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è **–º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ** (–∫–∞–∂–¥—ã–µ 250ms –∏–∑-–∑–∞ debounce), —Å–æ–∑–¥–∞–≤–∞—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ø–∏—Ç–∞–Ω–∏–µ. –ü—Ä–∏ –±—ã—Å—Ç—Ä–æ–º –Ω–∞–∂–∞—Ç–∏–∏ - —Ç–æ–ª—å–∫–æ **–æ–¥–Ω–æ** –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞.

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–°–Ω–∏–∂–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ –≤–≤–æ–¥–µ PIN** ‚≠ê –ì–õ–ê–í–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï
   - –Ø—Ä–∫–æ—Å—Ç—å —Å–Ω–∏–∂–∞–µ—Ç—Å—è –¥–æ 50% (128/255) –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ —Ä–µ–∂–∏–º –≤–≤–æ–¥–∞ PIN
   - –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –¥–∏—Å–ø–ª–µ—è –ø–∞–¥–∞–µ—Ç —Å ~100mA –¥–æ ~50mA
   - –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ PIN —è—Ä–∫–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–æ 100%
   - –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –æ–±—â–µ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç brownout

2. **–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏**
   - –ú–æ–∂–Ω–æ –∑–∞–∂–∏–º–∞—Ç—å –∫–Ω–æ–ø–∫—É –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–≤–æ–¥–∞
   - –ü—Ä–∏ —É–¥–µ—Ä–∂–∞–Ω–∏–∏ –∫–Ω–æ–ø–∫–∏ >300ms —Å–∏—Å—Ç–µ–º–∞ –∂–¥–µ—Ç –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ 20ms
   - –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞ (–∫–∞–∂–¥—ã–µ 150ms –≤–º–µ—Å—Ç–æ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ)
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ 30ms –ø–æ—Å–ª–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –ø–∏—Ç–∞–Ω–∏—è

3. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏—Å–ø–ª–µ—è**
   - `displayManager.init()` —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ü–ï–†–ï–î –ø—Ä–æ–≤–µ—Ä–∫–æ–π PIN
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –º–∏–≥–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º PIN –∫–æ–¥–µ
   - –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ PIN —è—Ä–∫–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–æ 100%

3. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ debounce –≤—Ä–µ–º–µ–Ω–∏**
   - –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 250ms –¥–æ 350ms –¥–ª—è –±–æ–ª—å—à–µ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
   - –£–º–µ–Ω—å—à–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —ç–∫—Ä–∞–Ω–∞

4. **–ó–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –ø–∏—Ç–∞–Ω–∏—è**
   - –ó–∞–¥–µ—Ä–∂–∫–∞ 50ms –ø–æ—Å–ª–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —ç–∫—Ä–∞–Ω–∞
   - –î–∞–µ—Ç –≤—Ä–µ–º—è –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ø–æ—Å–ª–µ —Å–∫–∞—á–∫–∞ —Ç–æ–∫–∞

5. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏—Å–ø–ª–µ—è**
   - `displayManager.init()` —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ü–ï–†–ï–î –ø—Ä–æ–≤–µ—Ä–∫–æ–π PIN
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –º–∏–≥–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º PIN –∫–æ–¥–µ

### üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∏ brownout detector
–í `platformio.ini` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:
```ini
-DCONFIG_ESP32_BROWNOUT_DET_LVL=0  # 2.43V (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

## –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–Ω–∏–∑–∏—Ç—å –ø–æ—Ä–æ–≥ brownout (–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ)
–í `platformio.ini` –∏–∑–º–µ–Ω–∏—Ç–µ:
```ini
-DCONFIG_ESP32_BROWNOUT_DET_LVL=1  # 2.33V –≤–º–µ—Å—Ç–æ 2.43V
```

‚ö†Ô∏è –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å—Ç–∞–≤–∏—Ç—å –Ω–∏–∂–µ 2.26V (—É—Ä–æ–≤–µ–Ω—å 2)!

### –í–∞—Ä–∏–∞–Ω—Ç 2: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä (–∞–ø–ø–∞—Ä–∞—Ç–Ω–æ) ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø
–ü—Ä–∏–ø–∞—è–π—Ç–µ —ç–ª–µ–∫—Ç—Ä–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä **470¬µF - 1000¬µF, 6.3V** –∫ JST —Ä–∞–∑—ä–µ–º—É:
- **–ü–ª—é—Å (+)** –∫ –∫—Ä–∞—Å–Ω–æ–º—É –ø—Ä–æ–≤–æ–¥—É (VCC)
- **–ú–∏–Ω—É—Å (-)** –∫ —á–µ—Ä–Ω–æ–º—É –ø—Ä–æ–≤–æ–¥—É (GND)

–≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–∏—Ç –ø—Ä–æ–±–ª–µ–º—É —Å–æ —Å–∫–∞—á–∫–∞–º–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è.

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—É—é –±–∞—Ç–∞—Ä–µ—é
- –°–≤–µ–∂–∞—è Li-Ion/Li-Po –±–∞—Ç–∞—Ä–µ—è ‚â•500mAh
- –ù–∏–∑–∫–æ–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ
- –ò–∑–±–µ–≥–∞–π—Ç–µ —Å—Ç–∞—Ä—ã—Ö –∏–ª–∏ –¥–µ—à–µ–≤—ã—Ö –±–∞—Ç–∞—Ä–µ–π

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∫ –±–∞—Ç–∞—Ä–µ–µ —á–µ—Ä–µ–∑ JST
2. –í–∫–ª—é—á–∏—Ç–µ PIN –∫–æ–¥ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ (—á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
4. –í–≤–µ–¥–∏—Ç–µ PIN –∫–æ–¥:
   - –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ù–ï –¥–æ–ª–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è ‚úÖ
   - –Ø—Ä–∫–æ—Å—Ç—å —ç–∫—Ä–∞–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∏–∂–µ –ø—Ä–∏ –≤–≤–æ–¥–µ PIN ‚úÖ
   - –ú–æ–∂–Ω–æ –∑–∞–∂–∏–º–∞—Ç—å –∫–Ω–æ–ø–∫—É –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–≤–æ–¥–∞ ‚úÖ
5. –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ PIN —è—Ä–∫–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–æ 100%

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**–ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã:**
- –ü—Ä–∏ **—É–¥–µ—Ä–∂–∞–Ω–∏–∏ –∫–Ω–æ–ø–∫–∏**: —ç–∫—Ä–∞–Ω –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ (–∫–∞–∂–¥—ã–µ 250-350ms)
- –ö–∞–∂–¥–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞: —Å–∫–∞—á–æ–∫ —Ç–æ–∫–∞ ~50-100mA
- –î–∏—Å–ø–ª–µ–π –Ω–∞ 100% —è—Ä–∫–æ—Å—Ç–∏: –±–∞–∑–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ ~100mA
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–∏: –ø—Ä–æ—Å–∞–¥–∫–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–∫–∞—á–∫–µ
- –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç –Ω–∏–∂–µ 2.43V ‚Üí brownout reset

**–†–µ—à–µ–Ω–∏–µ:**
- **–û–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏**: —Ç–æ–ª—å–∫–æ 1 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ (–Ω–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ)
- –°–Ω–∏–∂–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏: ~50mA –≤–º–µ—Å—Ç–æ 100mA –±–∞–∑–æ–≤–æ–≥–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è
- –ó–∞–¥–µ—Ä–∂–∫–∏: –≤—Ä–µ–º—è –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏
- –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π debounce: –º–µ–Ω—å—à–µ —á–∞—Å—Ç–æ—Ç–∞ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –ö–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ —Å–∫–∞—á–∫–æ–≤

**–ü–æ—á–µ–º—É –±—ã—Å—Ç—Ä—ã–µ –Ω–∞–∂–∞—Ç–∏—è —Ä–∞–±–æ—Ç–∞–ª–∏:**
- –ë—ã—Å—Ç—Ä–æ–µ –Ω–∞–∂–∞—Ç–∏–µ ‚Üí 1 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ ‚Üí –∫–æ—Ä–æ—Ç–∫–∏–π —Å–∫–∞—á–æ–∫ —Ç–æ–∫–∞
- –£–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ ‚Üí –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ‚Üí –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ ‚Üí brownout

## –§–∞–π–ª—ã —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
- `src/pin_manager.cpp` - —Å–Ω–∏–∂–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏ –∏ –∑–∞–¥–µ—Ä–∂–∫–∏
- `src/main.cpp` - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏—Å–ø–ª–µ—è
- `platformio.ini` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ brownout
- `sdkconfig.defaults` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∏—Ç–∞–Ω–∏—è

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
–°–º. –ø–æ–¥—Ä–æ–±–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: `docs/fixes/battery-power-stability.md`
