# üåê –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

## üìã –û–±–∑–æ—Ä —Ä–µ–∂–∏–º–æ–≤

ESP32 T-Display TOTP –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 3 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.

## üéØ –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –†–µ–∂–∏–º | WiFi | –í–µ–±-—Å–µ—Ä–≤–µ—Ä | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ | BLE | –ü–∞—Ä–æ–ª–∏ | TOTP |
|-------|------|-----------|----------------------|-----|--------|------|
| **üì° AP Mode** | Access Point | ‚úÖ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ | ‚ùå –ù–ï–¢ | ‚úÖ | ‚úÖ | ‚ö†Ô∏è –ë–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ |
| **üîå Offline** | –í–´–ö–õ | ‚ùå –ù–ï–¢ | ‚ùå –ù–ï–¢ | ‚úÖ | ‚úÖ | ‚ö†Ô∏è –ë–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ |
| **üåê WiFi Client** | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ç–∏ | ‚úÖ –ü–æ –∑–∞–ø—Ä–æ—Å—É | ‚úÖ NTP | ‚úÖ | ‚úÖ | ‚úÖ –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å |

## üé® –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞

### –ü—Ä–æ–º–ø—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
```cpp
StartupMode DisplayManager::promptModeSelection()
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- **BTN1 (GPIO 35)** - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏
- **BTN2 (GPIO 0)** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞  
- **Timeout 3s** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä WiFi Mode

**–í–∏–∑—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω:**
- –ö–Ω–æ–ø–∫–∏ 80x40px
- –ü–æ–∑–∏—Ü–∏—è: —Ü–µ–Ω—Ç—Ä —ç–∫—Ä–∞–Ω–∞ + 10px –≤–Ω–∏–∑
- AP Mode: —Å–ª–µ–≤–∞ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ (-90px)
- Offline Mode: —Å–ø—Ä–∞–≤–∞ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ (+10px)

## üì° AP Mode (Access Point)

### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **WiFi:** –°–æ–∑–¥–∞–µ—Ç —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ `ESP32-TOTP-Setup`
- **IP:** 192.168.4.1
- **–í–µ–±-—Å–µ—Ä–≤–µ—Ä:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫
- **–í—Ä–µ–º—è:** –ë–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —á–∞—Å—ã ESP32)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ  
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è–º–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –î–æ—Å—Ç—É–ø –∫ TOTP –∫–æ–¥–∞–º (–≤—Ä–µ–º—è –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º)
- BLE –ø–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–æ–ª–µ–π

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- ‚ö†Ô∏è TOTP –∫–æ–¥—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º–∏ –±–µ–∑ NTP
- –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

## üîå Offline Mode

### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏  
- **WiFi:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω
- **–í–µ–±-—Å–µ—Ä–≤–µ—Ä:** –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –¢–æ–ª—å–∫–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏ + BLE
- **–ü–∏—Ç–∞–Ω–∏–µ:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞ Password Manager
- BLE –ø–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–æ–ª–µ–π
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö TOTP –∫–æ–¥–æ–≤
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (air-gapped)

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- ‚ö†Ô∏è –ù–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- ‚ö†Ô∏è TOTP –∫–æ–¥—ã –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
- –¢–æ–ª—å–∫–æ BLE –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

## üåê WiFi Client Mode

### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **WiFi:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–µ—Ç–∏
- **NTP:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏
- **–í–µ–±-—Å–µ—Ä–≤–µ—Ä:** –ó–∞–ø—É—Å–∫ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** –ü–æ–ª–Ω–∞—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- Self-hosted –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –¥–æ–º–∞—à–Ω–µ–π —Å–µ—Ç–∏
- –¢–æ—á–Ω—ã–µ TOTP –∫–æ–¥—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
- –ü–æ–ª–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∑–∞—â–∏—Ç–æ–π
- –°–µ–º–µ–π–Ω—ã–π/–∫–æ–º–∞–Ω–¥–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞—Ä–æ–ª—è–º

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞  
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ –¢–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è TOTP
- ‚úÖ –£–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–µ–±
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–æ–º–∞—à–Ω–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π

## üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤

### –í–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
- **AP Mode** ‚Üê ‚Üí **Offline Mode**: —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–ª–∏ –∫–Ω–æ–ø–∫–∏
- **WiFi Mode**: —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è —Å–º–µ–Ω—ã —Å–µ—Ç–∏

### –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –ü—Ä–æ–º–ø—Ç –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ (3 —Å–µ–∫—É–Ω–¥—ã)
- –ó–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–±–æ—Ä–∞
- Fallback –Ω–∞ WiFi Mode –ø—Ä–∏ —Ç–∞–π–º–∞—É—Ç–µ

## üìä –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### AP Mode - –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è:
- üè† –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –Ω–æ–≤–æ–º –º–µ—Å—Ç–µ
- üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ  
- üéØ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- üì± –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞—Ä–æ–ª—è–º

### Offline Mode - –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è:
- üîí –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- üîã –î–ª–∏—Ç–µ–ª—å–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- ‚úàÔ∏è –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –±–µ–∑ WiFi
- üè¢ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–µ—Ç–∏

### WiFi Client Mode - –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è:
- üè† –î–æ–º–∞—à–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –°–µ–º–µ–π–Ω—ã–π –¥–æ—Å—Ç—É–ø
- üíª Self-hosted —Ä–µ—à–µ–Ω–∏–µ
- üîÑ –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```cpp
// –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ –≤ ConfigManager
enum class StartupMode {
    AP_MODE,
    OFFLINE_MODE,  
    WIFI_MODE
};
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –†–µ–∂–∏–º —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ LittleFS
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–±—Ä–æ—Å–∞ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ª—é–±—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!** üöÄ
